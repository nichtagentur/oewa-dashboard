<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OEWA Dashboard</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Fraunces:wght@600;700&display=swap');

    :root {
      --bg-1: #f7f1e8;
      --bg-2: #e6f2ef;
      --ink: #1b1b1f;
      --muted: #5c5c66;
      --accent: #0f766e;
      --accent-2: #0c4a6e;
      --card: #ffffff;
      --stroke: #e6e2d9;
      --warn: #c2410c;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Space Grotesk", system-ui, -apple-system, Segoe UI, sans-serif;
      color: var(--ink);
      background: radial-gradient(1200px 600px at 10% -10%, #e1f1ff 0%, transparent 60%),
                  radial-gradient(900px 500px at 110% 10%, #ffe9c9 0%, transparent 55%),
                  linear-gradient(180deg, var(--bg-1), var(--bg-2));
      min-height: 100vh;
    }

    .wrap {
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 20px 60px;
    }

    header {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-bottom: 24px;
    }

    h1 {
      font-family: "Fraunces", serif;
      font-size: 34px;
      margin: 0;
    }

    .subtitle {
      color: var(--muted);
      font-size: 15px;
    }

    .kpis {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin: 20px 0 28px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: 14px;
      padding: 16px 18px;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.08);
    }

    .kpi-label {
      color: var(--muted);
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .kpi-value {
      font-size: 26px;
      font-weight: 700;
      margin-top: 6px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 16px;
    }

    .section-title {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 8px;
    }

    .chart {
      width: 100%;
      height: 260px;
    }

    .list {
      margin: 0;
      padding: 0;
      list-style: none;
      display: grid;
      gap: 8px;
    }

    .list li {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      padding: 6px 0;
      border-bottom: 1px dashed var(--stroke);
    }

    .pill {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #eef2ff;
      color: #3730a3;
      align-self: center;
    }

    .legend {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      font-size: 12px;
      color: var(--muted);
      margin-top: 8px;
    }

    .legend span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      display: inline-block;
    }

    .footer-note {
      margin-top: 28px;
      font-size: 12px;
      color: var(--muted);
    }

    .tooltip {
      position: fixed;
      pointer-events: none;
      background: #111827;
      color: #f9fafb;
      font-size: 12px;
      padding: 6px 8px;
      border-radius: 8px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.18);
      opacity: 0;
      transform: translate(-50%, -110%);
      transition: opacity 0.12s ease;
      z-index: 9999;
      white-space: nowrap;
    }

    @media (max-width: 640px) {
      h1 { font-size: 28px; }
      .chart { height: 220px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>OEWA Market Dashboard</h1>
      <div class="subtitle">This dataset tracks monthly audience and usage for Austrian digital brands and networks measured by OEWA.</div>
    </header>

    <section class="card" style="margin-bottom: 18px;">
      <div class="section-title">What this data is</div>
      <div class="subtitle" style="margin-top: 6px;">
        OEWA (Austrian Web Analysis) publishes audience measurement for websites and digital networks.
        Each row is one brand (or network) in one month.
        The data covers November 2021 to December 2025.
      </div>
      <div class="subtitle" style="margin-top: 10px;">
        Key columns:
        <strong>unique_users</strong> = how many people visited,
        <strong>net_reach</strong> = reach in percent,
        <strong>visits</strong> = number of visits,
        <strong>impressions</strong> = page views,
        <strong>usetime_seconds</strong> = average time spent,
        <strong>impressions_per_visits</strong> = pages per visit.
      </div>
      <div class="subtitle" style="margin-top: 10px;">
        Categories:
        <strong>einzelangebot</strong> = single website,
        <strong>dach-marken</strong> = brand umbrella / media house,
        <strong>adnetwork</strong> = ad network group.
      </div>
    </section>

    <section class="kpis" id="kpis"></section>

    <section class="grid">
      <div class="card">
        <div class="section-title">Total Unique Users by Category</div>
        <div class="subtitle">Shows audience size per category over time.</div>
        <svg class="chart" id="chart-category" viewBox="0 0 600 260"></svg>
        <div class="legend" id="legend-category"></div>
      </div>

      <div class="card">
        <div class="section-title">Top 10 Brands (Latest Month)</div>
        <div class="subtitle">Highest unique users in the latest month.</div>
        <ol class="list" id="top-list"></ol>
      </div>

      <div class="card">
        <div class="section-title">Engagement Quality (Top 30)</div>
        <div class="subtitle">Bigger dots mean more users. Up and right means deeper engagement.</div>
        <svg class="chart" id="chart-scatter" viewBox="0 0 600 260"></svg>
        <div class="legend">X: Impressions per Visit, Y: Avg Time Spent (seconds)</div>
      </div>

      <div class="card">
        <div class="section-title">Missing Data Counts</div>
        <div class="subtitle">Months where OEWA did not provide data.</div>
        <svg class="chart" id="chart-missing" viewBox="0 0 600 260"></svg>
        <div class="legend" id="legend-missing"></div>
      </div>
    </section>

    <div class="footer-note">Data source: OEWA exports (2021-11 to 2025-12)</div>
  </div>

  <div class="tooltip" id="tooltip"></div>

  <script>
  const data = {
  "latest_month": "2025-12-01",
  "months": [
    "2021-11-01",
    "2021-12-01",
    "2022-01-01",
    "2022-02-01",
    "2022-03-01",
    "2022-04-01",
    "2022-05-01",
    "2022-06-01",
    "2022-07-01",
    "2022-08-01",
    "2022-09-01",
    "2022-10-01",
    "2022-11-01",
    "2022-12-01",
    "2023-01-01",
    "2023-02-01",
    "2023-03-01",
    "2023-04-01",
    "2023-05-01",
    "2023-06-01",
    "2023-07-01",
    "2023-08-01",
    "2023-09-01",
    "2023-10-01",
    "2023-11-01",
    "2023-12-01",
    "2024-01-01",
    "2024-02-01",
    "2024-03-01",
    "2024-04-01",
    "2024-05-01",
    "2024-06-01",
    "2024-07-01",
    "2024-08-01",
    "2024-09-01",
    "2024-10-01",
    "2024-11-01",
    "2024-12-01",
    "2025-01-01",
    "2025-02-01",
    "2025-03-01",
    "2025-04-01",
    "2025-05-01",
    "2025-06-01",
    "2025-07-01",
    "2025-08-01",
    "2025-09-01",
    "2025-10-01",
    "2025-11-01",
    "2025-12-01"
  ],
  "category_series": [
    {
      "category": "adnetwork",
      "series": [
        {
          "month": "2021-11-01",
          "value": 47023215
        },
        {
          "month": "2021-12-01",
          "value": 47611237
        },
        {
          "month": "2022-01-01",
          "value": 45078979
        },
        {
          "month": "2022-02-01",
          "value": 41245779
        },
        {
          "month": "2022-03-01",
          "value": 42182972
        },
        {
          "month": "2022-04-01",
          "value": 40059052
        },
        {
          "month": "2022-05-01",
          "value": 41414521
        },
        {
          "month": "2022-06-01",
          "value": 39901361
        },
        {
          "month": "2022-07-01",
          "value": 39589873
        },
        {
          "month": "2022-08-01",
          "value": 41981007
        },
        {
          "month": "2022-09-01",
          "value": 41707159
        },
        {
          "month": "2022-10-01",
          "value": 45123977
        },
        {
          "month": "2022-11-01",
          "value": 43765221
        },
        {
          "month": "2022-12-01",
          "value": 41894754
        },
        {
          "month": "2023-01-01",
          "value": 41496707
        },
        {
          "month": "2023-02-01",
          "value": 38736709
        },
        {
          "month": "2023-03-01",
          "value": 39852510
        },
        {
          "month": "2023-04-01",
          "value": 37946063
        },
        {
          "month": "2023-05-01",
          "value": 38233182
        },
        {
          "month": "2023-06-01",
          "value": 38774179
        },
        {
          "month": "2023-07-01",
          "value": 41364645
        },
        {
          "month": "2023-08-01",
          "value": 40698052
        },
        {
          "month": "2023-09-01",
          "value": 36457861
        },
        {
          "month": "2023-10-01",
          "value": 37319093
        },
        {
          "month": "2023-11-01",
          "value": 35945428
        },
        {
          "month": "2023-12-01",
          "value": 33655237
        },
        {
          "month": "2024-01-01",
          "value": 34115034
        },
        {
          "month": "2024-02-01",
          "value": 31914377
        },
        {
          "month": "2024-03-01",
          "value": 32949601
        },
        {
          "month": "2024-04-01",
          "value": 32276870
        },
        {
          "month": "2024-05-01",
          "value": 32315804
        },
        {
          "month": "2024-06-01",
          "value": 32916762
        },
        {
          "month": "2024-07-01",
          "value": 32183824
        },
        {
          "month": "2024-08-01",
          "value": 34921956
        },
        {
          "month": "2024-09-01",
          "value": 34523662
        },
        {
          "month": "2024-10-01",
          "value": 33366269
        },
        {
          "month": "2024-11-01",
          "value": 32010061
        },
        {
          "month": "2024-12-01",
          "value": 31591633
        },
        {
          "month": "2025-01-01",
          "value": 36823624
        },
        {
          "month": "2025-02-01",
          "value": 36369696
        },
        {
          "month": "2025-03-01",
          "value": 39603553
        },
        {
          "month": "2025-04-01",
          "value": 38813256
        },
        {
          "month": "2025-05-01",
          "value": 41801963
        },
        {
          "month": "2025-06-01",
          "value": 40733832
        },
        {
          "month": "2025-07-01",
          "value": 43836343
        },
        {
          "month": "2025-08-01",
          "value": 41735979
        },
        {
          "month": "2025-09-01",
          "value": 38536599
        },
        {
          "month": "2025-10-01",
          "value": 0
        },
        {
          "month": "2025-11-01",
          "value": 0
        },
        {
          "month": "2025-12-01",
          "value": 0
        }
      ]
    },
    {
      "category": "dach-marken",
      "series": [
        {
          "month": "2021-11-01",
          "value": 104473272
        },
        {
          "month": "2021-12-01",
          "value": 104859454
        },
        {
          "month": "2022-01-01",
          "value": 101920969
        },
        {
          "month": "2022-02-01",
          "value": 96374172
        },
        {
          "month": "2022-03-01",
          "value": 99688131
        },
        {
          "month": "2022-04-01",
          "value": 92176742
        },
        {
          "month": "2022-05-01",
          "value": 100046659
        },
        {
          "month": "2022-06-01",
          "value": 98087546
        },
        {
          "month": "2022-07-01",
          "value": 94563809
        },
        {
          "month": "2022-08-01",
          "value": 98584451
        },
        {
          "month": "2022-09-01",
          "value": 95344309
        },
        {
          "month": "2022-10-01",
          "value": 100688051
        },
        {
          "month": "2022-11-01",
          "value": 99246308
        },
        {
          "month": "2022-12-01",
          "value": 96890978
        },
        {
          "month": "2023-01-01",
          "value": 101201087
        },
        {
          "month": "2023-02-01",
          "value": 97948103
        },
        {
          "month": "2023-03-01",
          "value": 100154563
        },
        {
          "month": "2023-04-01",
          "value": 96049545
        },
        {
          "month": "2023-05-01",
          "value": 97128602
        },
        {
          "month": "2023-06-01",
          "value": 98019471
        },
        {
          "month": "2023-07-01",
          "value": 102462792
        },
        {
          "month": "2023-08-01",
          "value": 100827861
        },
        {
          "month": "2023-09-01",
          "value": 88511959
        },
        {
          "month": "2023-10-01",
          "value": 97714299
        },
        {
          "month": "2023-11-01",
          "value": 99193863
        },
        {
          "month": "2023-12-01",
          "value": 91209718
        },
        {
          "month": "2024-01-01",
          "value": 77803542
        },
        {
          "month": "2024-02-01",
          "value": 79032114
        },
        {
          "month": "2024-03-01",
          "value": 78786842
        },
        {
          "month": "2024-04-01",
          "value": 77688050
        },
        {
          "month": "2024-05-01",
          "value": 83075521
        },
        {
          "month": "2024-06-01",
          "value": 87455076
        },
        {
          "month": "2024-07-01",
          "value": 84123636
        },
        {
          "month": "2024-08-01",
          "value": 85912725
        },
        {
          "month": "2024-09-01",
          "value": 87091893
        },
        {
          "month": "2024-10-01",
          "value": 86428174
        },
        {
          "month": "2024-11-01",
          "value": 74535105
        },
        {
          "month": "2024-12-01",
          "value": 80423570
        },
        {
          "month": "2025-01-01",
          "value": 105813678
        },
        {
          "month": "2025-02-01",
          "value": 104229516
        },
        {
          "month": "2025-03-01",
          "value": 114786228
        },
        {
          "month": "2025-04-01",
          "value": 105635539
        },
        {
          "month": "2025-05-01",
          "value": 113720192
        },
        {
          "month": "2025-06-01",
          "value": 109083795
        },
        {
          "month": "2025-07-01",
          "value": 119396760
        },
        {
          "month": "2025-08-01",
          "value": 115274840
        },
        {
          "month": "2025-09-01",
          "value": 108002783
        },
        {
          "month": "2025-10-01",
          "value": 0
        },
        {
          "month": "2025-11-01",
          "value": 0
        },
        {
          "month": "2025-12-01",
          "value": 0
        }
      ]
    },
    {
      "category": "einzelangebot",
      "series": [
        {
          "month": "2021-11-01",
          "value": 64164652
        },
        {
          "month": "2021-12-01",
          "value": 65870786
        },
        {
          "month": "2022-01-01",
          "value": 64510038
        },
        {
          "month": "2022-02-01",
          "value": 60396756
        },
        {
          "month": "2022-03-01",
          "value": 61852708
        },
        {
          "month": "2022-04-01",
          "value": 57818940
        },
        {
          "month": "2022-05-01",
          "value": 61335626
        },
        {
          "month": "2022-06-01",
          "value": 59466189
        },
        {
          "month": "2022-07-01",
          "value": 59151027
        },
        {
          "month": "2022-08-01",
          "value": 62072547
        },
        {
          "month": "2022-09-01",
          "value": 60113397
        },
        {
          "month": "2022-10-01",
          "value": 64252987
        },
        {
          "month": "2022-11-01",
          "value": 62942343
        },
        {
          "month": "2022-12-01",
          "value": 62830589
        },
        {
          "month": "2023-01-01",
          "value": 63727239
        },
        {
          "month": "2023-02-01",
          "value": 60437013
        },
        {
          "month": "2023-03-01",
          "value": 62165975
        },
        {
          "month": "2023-04-01",
          "value": 60562980
        },
        {
          "month": "2023-05-01",
          "value": 60312518
        },
        {
          "month": "2023-06-01",
          "value": 60478807
        },
        {
          "month": "2023-07-01",
          "value": 64424625
        },
        {
          "month": "2023-08-01",
          "value": 62579659
        },
        {
          "month": "2023-09-01",
          "value": 53970828
        },
        {
          "month": "2023-10-01",
          "value": 56042260
        },
        {
          "month": "2023-11-01",
          "value": 56679635
        },
        {
          "month": "2023-12-01",
          "value": 52371761
        },
        {
          "month": "2024-01-01",
          "value": 44388414
        },
        {
          "month": "2024-02-01",
          "value": 44585222
        },
        {
          "month": "2024-03-01",
          "value": 45235352
        },
        {
          "month": "2024-04-01",
          "value": 43456032
        },
        {
          "month": "2024-05-01",
          "value": 46901454
        },
        {
          "month": "2024-06-01",
          "value": 49202792
        },
        {
          "month": "2024-07-01",
          "value": 47832783
        },
        {
          "month": "2024-08-01",
          "value": 48717027
        },
        {
          "month": "2024-09-01",
          "value": 49484965
        },
        {
          "month": "2024-10-01",
          "value": 48748208
        },
        {
          "month": "2024-11-01",
          "value": 42421059
        },
        {
          "month": "2024-12-01",
          "value": 45533952
        },
        {
          "month": "2025-01-01",
          "value": 59468870
        },
        {
          "month": "2025-02-01",
          "value": 57818658
        },
        {
          "month": "2025-03-01",
          "value": 63874009
        },
        {
          "month": "2025-04-01",
          "value": 59919276
        },
        {
          "month": "2025-05-01",
          "value": 65210489
        },
        {
          "month": "2025-06-01",
          "value": 62533361
        },
        {
          "month": "2025-07-01",
          "value": 67151449
        },
        {
          "month": "2025-08-01",
          "value": 63109011
        },
        {
          "month": "2025-09-01",
          "value": 59361557
        },
        {
          "month": "2025-10-01",
          "value": 0
        },
        {
          "month": "2025-11-01",
          "value": 0
        },
        {
          "month": "2025-12-01",
          "value": 0
        }
      ]
    }
  ],
  "top_latest": [
    {
      "name": "ausschreibung.at - Ausschreibungen f\u00fcr die Bauwirtschaft",
      "category": "einzelangebot",
      "type": "service",
      "unique_users": 0,
      "net_reach": "0",
      "impressions": 122303
    },
    {
      "name": "vienna.at - VIENNA ONLINE",
      "category": "einzelangebot",
      "type": "service",
      "unique_users": 0,
      "net_reach": "0",
      "impressions": 3304792
    },
    {
      "name": "vol.at - VORARLBERG ONLINE",
      "category": "einzelangebot",
      "type": "service",
      "unique_users": 0,
      "net_reach": "0",
      "impressions": 35571541
    },
    {
      "name": "bdb.at - BAUDATENBANK.AT - Partner der Bauwirtschaft",
      "category": "einzelangebot",
      "type": "service",
      "unique_users": 0,
      "net_reach": "0",
      "impressions": 17014
    },
    {
      "name": "derstandard.at - derStandard.at",
      "category": "einzelangebot",
      "type": "service",
      "unique_users": 0,
      "net_reach": "0",
      "impressions": 98204288
    },
    {
      "name": "elektro.at ",
      "category": "einzelangebot",
      "type": "service",
      "unique_users": 0,
      "net_reach": "0",
      "impressions": 33579
    },
    {
      "name": "falter.at ",
      "category": "einzelangebot",
      "type": "service",
      "unique_users": 0,
      "net_reach": "0",
      "impressions": 2888292
    },
    {
      "name": "fondsprofessionell.at - FONDS professionell",
      "category": "einzelangebot",
      "type": "service",
      "unique_users": 0,
      "net_reach": "0",
      "impressions": 343245
    },
    {
      "name": "gmx.at - GMX.at",
      "category": "einzelangebot",
      "type": "service",
      "unique_users": 0,
      "net_reach": "0",
      "impressions": 481555850
    },
    {
      "name": "gmx.net - GMX.at",
      "category": "einzelangebot",
      "type": "service",
      "unique_users": 0,
      "net_reach": "0",
      "impressions": 126794770
    }
  ],
  "scatter_latest": [
    {
      "name": "ausschreibung.at - Ausschreibungen f\u00fcr die Bauwirtschaft",
      "category": "einzelangebot",
      "usetime_seconds": 260,
      "impressions_per_visits": 4.45,
      "unique_users": 0
    },
    {
      "name": "vienna.at - VIENNA ONLINE",
      "category": "einzelangebot",
      "usetime_seconds": 135,
      "impressions_per_visits": 1.76,
      "unique_users": 0
    },
    {
      "name": "vol.at - VORARLBERG ONLINE",
      "category": "einzelangebot",
      "usetime_seconds": 296,
      "impressions_per_visits": 2.9,
      "unique_users": 0
    },
    {
      "name": "bdb.at - BAUDATENBANK.AT - Partner der Bauwirtschaft",
      "category": "einzelangebot",
      "usetime_seconds": 136,
      "impressions_per_visits": 1.62,
      "unique_users": 0
    },
    {
      "name": "derstandard.at - derStandard.at",
      "category": "einzelangebot",
      "usetime_seconds": 411,
      "impressions_per_visits": 3.3,
      "unique_users": 0
    },
    {
      "name": "elektro.at ",
      "category": "einzelangebot",
      "usetime_seconds": 127,
      "impressions_per_visits": 1.6,
      "unique_users": 0
    },
    {
      "name": "falter.at ",
      "category": "einzelangebot",
      "usetime_seconds": 202,
      "impressions_per_visits": 1.93,
      "unique_users": 0
    },
    {
      "name": "fondsprofessionell.at - FONDS professionell",
      "category": "einzelangebot",
      "usetime_seconds": 174,
      "impressions_per_visits": 2.89,
      "unique_users": 0
    },
    {
      "name": "gmx.at - GMX.at",
      "category": "einzelangebot",
      "usetime_seconds": 412,
      "impressions_per_visits": 5.37,
      "unique_users": 0
    },
    {
      "name": "gmx.net - GMX.at",
      "category": "einzelangebot",
      "usetime_seconds": 412,
      "impressions_per_visits": 10.76,
      "unique_users": 0
    },
    {
      "name": "heute.at",
      "category": "einzelangebot",
      "usetime_seconds": 258,
      "impressions_per_visits": 3.48,
      "unique_users": 0
    },
    {
      "name": "industriemagazin.at - Das \u00f6sterreichische Industriemagazin",
      "category": "einzelangebot",
      "usetime_seconds": 108,
      "impressions_per_visits": 1.45,
      "unique_users": 0
    },
    {
      "name": "kosmo.at",
      "category": "einzelangebot",
      "usetime_seconds": 86,
      "impressions_per_visits": 1.22,
      "unique_users": 0
    },
    {
      "name": "kronehit.at",
      "category": "einzelangebot",
      "usetime_seconds": 220,
      "impressions_per_visits": 2.73,
      "unique_users": 0
    },
    {
      "name": "netdoktor.at",
      "category": "einzelangebot",
      "usetime_seconds": 120,
      "impressions_per_visits": 1.64,
      "unique_users": 0
    },
    {
      "name": "autorevue.at",
      "category": "einzelangebot",
      "usetime_seconds": 67,
      "impressions_per_visits": 1.47,
      "unique_users": 0
    },
    {
      "name": "gusto.at",
      "category": "einzelangebot",
      "usetime_seconds": 186,
      "impressions_per_visits": 1.64,
      "unique_users": 0
    },
    {
      "name": "news.at",
      "category": "einzelangebot",
      "usetime_seconds": 207,
      "impressions_per_visits": 11.37,
      "unique_users": 0
    },
    {
      "name": "trend.at",
      "category": "einzelangebot",
      "usetime_seconds": 137,
      "impressions_per_visits": 2.01,
      "unique_users": 0
    },
    {
      "name": "tv-media.at",
      "category": "einzelangebot",
      "usetime_seconds": 169,
      "impressions_per_visits": 3.72,
      "unique_users": 0
    },
    {
      "name": "woman.at ",
      "category": "einzelangebot",
      "usetime_seconds": 117,
      "impressions_per_visits": 1.94,
      "unique_users": 0
    },
    {
      "name": "noen.at - N\u00d6N",
      "category": "einzelangebot",
      "usetime_seconds": 161,
      "impressions_per_visits": 4.64,
      "unique_users": 0
    },
    {
      "name": "oe24.at",
      "category": "einzelangebot",
      "usetime_seconds": 174,
      "impressions_per_visits": 4.28,
      "unique_users": 0
    },
    {
      "name": "wetter.at",
      "category": "einzelangebot",
      "usetime_seconds": 116,
      "impressions_per_visits": 4.65,
      "unique_users": 0
    },
    {
      "name": "nachrichten.at - Nachrichten.at",
      "category": "einzelangebot",
      "usetime_seconds": 215,
      "impressions_per_visits": 3.0,
      "unique_users": 0
    },
    {
      "name": "orf.at",
      "category": "einzelangebot",
      "usetime_seconds": 353,
      "impressions_per_visits": 4.89,
      "unique_users": 0
    },
    {
      "name": "salzburg24.at",
      "category": "einzelangebot",
      "usetime_seconds": 200,
      "impressions_per_visits": 3.3,
      "unique_users": 0
    },
    {
      "name": "sn.at - Salzburger Nachrichten",
      "category": "einzelangebot",
      "usetime_seconds": 187,
      "impressions_per_visits": 2.93,
      "unique_users": 0
    },
    {
      "name": "diepresse.com",
      "category": "einzelangebot",
      "usetime_seconds": 228,
      "impressions_per_visits": 2.64,
      "unique_users": 0
    },
    {
      "name": "kleinezeitung.at",
      "category": "einzelangebot",
      "usetime_seconds": 280,
      "impressions_per_visits": 5.36,
      "unique_users": 0
    }
  ],
  "missing_months": [
    "2021-11-01",
    "2022-01-01",
    "2022-02-01",
    "2022-03-01",
    "2022-05-01",
    "2022-06-01",
    "2022-07-01",
    "2022-08-01",
    "2022-09-01",
    "2023-02-01",
    "2023-03-01",
    "2023-05-01",
    "2023-09-01",
    "2023-10-01",
    "2023-11-01",
    "2023-12-01",
    "2024-01-01",
    "2024-02-01",
    "2024-03-01",
    "2024-04-01",
    "2024-05-01",
    "2024-06-01",
    "2024-07-01",
    "2024-08-01",
    "2024-09-01",
    "2024-10-01",
    "2024-11-01",
    "2024-12-01",
    "2025-01-01",
    "2025-07-01",
    "2025-08-01",
    "2025-09-01",
    "2025-10-01"
  ],
  "missing_by_category": [
    {
      "category": "adnetwork",
      "series": [
        {
          "month": "2021-11-01",
          "value": 0
        },
        {
          "month": "2022-01-01",
          "value": 0
        },
        {
          "month": "2022-02-01",
          "value": 0
        },
        {
          "month": "2022-03-01",
          "value": 0
        },
        {
          "month": "2022-05-01",
          "value": 1
        },
        {
          "month": "2022-06-01",
          "value": 1
        },
        {
          "month": "2022-07-01",
          "value": 0
        },
        {
          "month": "2022-08-01",
          "value": 0
        },
        {
          "month": "2022-09-01",
          "value": 0
        },
        {
          "month": "2023-02-01",
          "value": 1
        },
        {
          "month": "2023-03-01",
          "value": 0
        },
        {
          "month": "2023-05-01",
          "value": 0
        },
        {
          "month": "2023-09-01",
          "value": 0
        },
        {
          "month": "2023-10-01",
          "value": 1
        },
        {
          "month": "2023-11-01",
          "value": 5
        },
        {
          "month": "2023-12-01",
          "value": 5
        },
        {
          "month": "2024-01-01",
          "value": 7
        },
        {
          "month": "2024-02-01",
          "value": 7
        },
        {
          "month": "2024-03-01",
          "value": 1
        },
        {
          "month": "2024-04-01",
          "value": 0
        },
        {
          "month": "2024-05-01",
          "value": 0
        },
        {
          "month": "2024-06-01",
          "value": 0
        },
        {
          "month": "2024-07-01",
          "value": 1
        },
        {
          "month": "2024-08-01",
          "value": 0
        },
        {
          "month": "2024-09-01",
          "value": 0
        },
        {
          "month": "2024-10-01",
          "value": 0
        },
        {
          "month": "2024-11-01",
          "value": 0
        },
        {
          "month": "2024-12-01",
          "value": 0
        },
        {
          "month": "2025-01-01",
          "value": 2
        },
        {
          "month": "2025-07-01",
          "value": 0
        },
        {
          "month": "2025-08-01",
          "value": 1
        },
        {
          "month": "2025-09-01",
          "value": 2
        },
        {
          "month": "2025-10-01",
          "value": 1
        }
      ]
    },
    {
      "category": "dach-marken",
      "series": [
        {
          "month": "2021-11-01",
          "value": 1
        },
        {
          "month": "2022-01-01",
          "value": 1
        },
        {
          "month": "2022-02-01",
          "value": 1
        },
        {
          "month": "2022-03-01",
          "value": 1
        },
        {
          "month": "2022-05-01",
          "value": 0
        },
        {
          "month": "2022-06-01",
          "value": 0
        },
        {
          "month": "2022-07-01",
          "value": 3
        },
        {
          "month": "2022-08-01",
          "value": 6
        },
        {
          "month": "2022-09-01",
          "value": 1
        },
        {
          "month": "2023-02-01",
          "value": 0
        },
        {
          "month": "2023-03-01",
          "value": 0
        },
        {
          "month": "2023-05-01",
          "value": 1
        },
        {
          "month": "2023-09-01",
          "value": 14
        },
        {
          "month": "2023-10-01",
          "value": 5
        },
        {
          "month": "2023-11-01",
          "value": 6
        },
        {
          "month": "2023-12-01",
          "value": 5
        },
        {
          "month": "2024-01-01",
          "value": 21
        },
        {
          "month": "2024-02-01",
          "value": 7
        },
        {
          "month": "2024-03-01",
          "value": 9
        },
        {
          "month": "2024-04-01",
          "value": 9
        },
        {
          "month": "2024-05-01",
          "value": 5
        },
        {
          "month": "2024-06-01",
          "value": 3
        },
        {
          "month": "2024-07-01",
          "value": 4
        },
        {
          "month": "2024-08-01",
          "value": 3
        },
        {
          "month": "2024-09-01",
          "value": 3
        },
        {
          "month": "2024-10-01",
          "value": 2
        },
        {
          "month": "2024-11-01",
          "value": 5
        },
        {
          "month": "2024-12-01",
          "value": 2
        },
        {
          "month": "2025-01-01",
          "value": 2
        },
        {
          "month": "2025-07-01",
          "value": 0
        },
        {
          "month": "2025-08-01",
          "value": 0
        },
        {
          "month": "2025-09-01",
          "value": 0
        },
        {
          "month": "2025-10-01",
          "value": 2
        }
      ]
    },
    {
      "category": "einzelangebot",
      "series": [
        {
          "month": "2021-11-01",
          "value": 1
        },
        {
          "month": "2022-01-01",
          "value": 2
        },
        {
          "month": "2022-02-01",
          "value": 2
        },
        {
          "month": "2022-03-01",
          "value": 1
        },
        {
          "month": "2022-05-01",
          "value": 1
        },
        {
          "month": "2022-06-01",
          "value": 1
        },
        {
          "month": "2022-07-01",
          "value": 2
        },
        {
          "month": "2022-08-01",
          "value": 4
        },
        {
          "month": "2022-09-01",
          "value": 1
        },
        {
          "month": "2023-02-01",
          "value": 2
        },
        {
          "month": "2023-03-01",
          "value": 1
        },
        {
          "month": "2023-05-01",
          "value": 1
        },
        {
          "month": "2023-09-01",
          "value": 13
        },
        {
          "month": "2023-10-01",
          "value": 4
        },
        {
          "month": "2023-11-01",
          "value": 6
        },
        {
          "month": "2023-12-01",
          "value": 5
        },
        {
          "month": "2024-01-01",
          "value": 21
        },
        {
          "month": "2024-02-01",
          "value": 10
        },
        {
          "month": "2024-03-01",
          "value": 9
        },
        {
          "month": "2024-04-01",
          "value": 9
        },
        {
          "month": "2024-05-01",
          "value": 4
        },
        {
          "month": "2024-06-01",
          "value": 3
        },
        {
          "month": "2024-07-01",
          "value": 3
        },
        {
          "month": "2024-08-01",
          "value": 3
        },
        {
          "month": "2024-09-01",
          "value": 4
        },
        {
          "month": "2024-10-01",
          "value": 2
        },
        {
          "month": "2024-11-01",
          "value": 4
        },
        {
          "month": "2024-12-01",
          "value": 2
        },
        {
          "month": "2025-01-01",
          "value": 2
        },
        {
          "month": "2025-07-01",
          "value": 1
        },
        {
          "month": "2025-08-01",
          "value": 2
        },
        {
          "month": "2025-09-01",
          "value": 2
        },
        {
          "month": "2025-10-01",
          "value": 2
        }
      ]
    }
  ]
};

  const colors = ["#0f766e", "#0c4a6e", "#a16207", "#a21caf", "#15803d"];
  const tooltip = document.getElementById("tooltip");

  function formatNumber(value) {
    if (value === null || value === undefined) return "-";
    if (value >= 1_000_000) return (value / 1_000_000).toFixed(1) + "M";
    if (value >= 1_000) return (value / 1_000).toFixed(1) + "k";
    return value.toString();
  }

  function showTip(text, x, y) {
    tooltip.textContent = text;
    tooltip.style.left = x + "px";
    tooltip.style.top = y + "px";
    tooltip.style.opacity = "1";
  }

  function hideTip() {
    tooltip.style.opacity = "0";
  }

  function renderKpis() {
    const kpis = document.getElementById("kpis");
    const latest = data.latest_month;
    const totals = data.category_series.map(cat => {
      const last = cat.series[cat.series.length - 1];
      return { category: cat.category, value: last ? last.value : 0 };
    });

    const totalAll = totals.reduce((sum, c) => sum + c.value, 0);

    const blocks = [
      { label: "Latest Month", value: latest },
      { label: "Total Unique Users", value: formatNumber(totalAll) },
      { label: "Categories", value: data.category_series.length },
      { label: "Top Brand", value: data.top_latest[0] ? data.top_latest[0].name : "-" },
    ];

    kpis.innerHTML = blocks.map(b => `
      <div class="card">
        <div class="kpi-label">${b.label}</div>
        <div class="kpi-value">${b.value}</div>
      </div>
    `).join("");
  }

  function renderLineChart() {
    const svg = document.getElementById("chart-category");
    const w = 600, h = 260, pad = 36;
    const maxY = Math.max(...data.category_series.flatMap(c => c.series.map(s => s.value)));

    let paths = "";
    let legend = "";
    let pointsMarkup = "";

    data.category_series.forEach((cat, idx) => {
      const color = colors[idx % colors.length];
      const points = cat.series.map((s, i) => {
        const x = pad + (i / (cat.series.length - 1)) * (w - pad * 2);
        const y = h - pad - (s.value / maxY) * (h - pad * 2);
        pointsMarkup += `<circle cx="${x}" cy="${y}" r="4" fill="${color}" data-tip="${cat.category} • ${s.month} • ${formatNumber(s.value)} unique users" />`;
        return `${x},${y}`;
      }).join(" ");
      paths += `<polyline fill="none" stroke="${color}" stroke-width="2.5" points="${points}" />`;
      legend += `<span><i class="dot" style="background:${color}"></i>${cat.category}</span>`;
    });

    const axes = `
      <line x1="${pad}" y1="${pad}" x2="${pad}" y2="${h - pad}" stroke="#cbd5e1" />
      <line x1="${pad}" y1="${h - pad}" x2="${w - pad}" y2="${h - pad}" stroke="#cbd5e1" />
    `;

    svg.innerHTML = axes + paths + pointsMarkup;
    document.getElementById("legend-category").innerHTML = legend;

    svg.querySelectorAll("circle").forEach(c => {
      c.addEventListener("mousemove", (e) => showTip(c.dataset.tip, e.clientX, e.clientY));
      c.addEventListener("mouseleave", hideTip);
    });
  }

  function renderTopList() {
    const list = document.getElementById("top-list");
    list.innerHTML = data.top_latest.map((r, idx) => `
      <li>
        <span>${idx + 1}. ${r.name}</span>
        <span>
          <span class="pill">${r.category}</span>
          <strong>${formatNumber(r.unique_users)}</strong>
        </span>
      </li>
    `).join("");
  }

  function renderScatter() {
    const svg = document.getElementById("chart-scatter");
    const w = 600, h = 260, pad = 36;
    const xs = data.scatter_latest.map(d => d.impressions_per_visits);
    const ys = data.scatter_latest.map(d => d.usetime_seconds);
    const maxX = Math.max(...xs, 1);
    const maxY = Math.max(...ys, 1);

    const dots = data.scatter_latest.map((d, i) => {
      const x = pad + (d.impressions_per_visits / maxX) * (w - pad * 2);
      const y = h - pad - (d.usetime_seconds / maxY) * (h - pad * 2);
      const size = 4 + (d.unique_users / xs.length) % 6;
      const color = colors[i % colors.length];
      const tip = `${d.name} • ${d.category} • ${d.impressions_per_visits.toFixed(2)} pages/visit • ${d.usetime_seconds}s`;
      return `<circle cx="${x}" cy="${y}" r="${size}" fill="${color}" opacity="0.8" data-tip="${tip}"></circle>`;
    }).join("");

    const axes = `
      <line x1="${pad}" y1="${pad}" x2="${pad}" y2="${h - pad}" stroke="#cbd5e1" />
      <line x1="${pad}" y1="${h - pad}" x2="${w - pad}" y2="${h - pad}" stroke="#cbd5e1" />
    `;

    svg.innerHTML = axes + dots;

    svg.querySelectorAll("circle").forEach(c => {
      c.addEventListener("mousemove", (e) => showTip(c.dataset.tip, e.clientX, e.clientY));
      c.addEventListener("mouseleave", hideTip);
    });
  }

  function renderMissing() {
    const svg = document.getElementById("chart-missing");
    const w = 600, h = 260, pad = 36;
    const cats = data.missing_by_category;
    const months = data.missing_months;
    const maxY = Math.max(...cats.flatMap(c => c.series.map(s => s.value)), 1);

    const barWidth = (w - pad * 2) / months.length;
    let bars = "";

    cats.forEach((cat, cidx) => {
      const color = colors[cidx % colors.length];
      cat.series.forEach((s, i) => {
        const x = pad + i * barWidth + cidx * (barWidth / cats.length);
        const height = (s.value / maxY) * (h - pad * 2);
        const y = h - pad - height;
        const width = (barWidth / cats.length) - 2;
        const tip = `${cat.category} • ${s.month} • ${s.value} missing`;
        bars += `<rect x="${x}" y="${y}" width="${width}" height="${height}" fill="${color}" opacity="0.75" data-tip="${tip}"></rect>`;
      });
    });

    const axes = `
      <line x1="${pad}" y1="${pad}" x2="${pad}" y2="${h - pad}" stroke="#cbd5e1" />
      <line x1="${pad}" y1="${h - pad}" x2="${w - pad}" y2="${h - pad}" stroke="#cbd5e1" />
    `;

    svg.innerHTML = axes + bars;

    const legend = cats.map((cat, idx) => `
      <span><i class="dot" style="background:${colors[idx % colors.length]}"></i>${cat.category}</span>
    `).join("");
    document.getElementById("legend-missing").innerHTML = legend;

    svg.querySelectorAll("rect").forEach(r => {
      r.addEventListener("mousemove", (e) => showTip(r.dataset.tip, e.clientX, e.clientY));
      r.addEventListener("mouseleave", hideTip);
    });
  }

  renderKpis();
  renderLineChart();
  renderTopList();
  renderScatter();
  renderMissing();
  </script>
</body>
</html>
